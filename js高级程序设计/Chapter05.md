## 第五章：引用类型

1. 使用对象
2. 创建并操作数组
3. 理解基本的JavaScript类型
4. 使用基本类型和基本包装类型

对象是某个特定引用类型的**实例**。新对象是使用new操作符后跟一个构造函数来创建的。构造函数本身就是一个函数，只不过该函数只是处于创建新对象的目的而定义的。

### 5.1 Object类型

Object类型是ECMAScript中使用最多的一个类型。

有两种创建Object实例的方式：

* 使用new操作符后跟Object构造函数。
* 使用对象字面量表示法。

````js
// 第一种
var person = new Object();
person.name = "Nicholas";
// 第二种
var person = {
	name = "Nicholas",
	age = 20
};
````

访问对象属性时有两种方法：

* 点表示法：person.name
* 方括号表示法：person["name"]。可以通过**变量**访问属性。

### 5.2 Array类型

ECMAScript数组与其他数组有以下不同：

* 数组的每一项可以保存任何类型的数据；
* 数组的大小可以动态调整（随着数据的添加自动添加）；

创建数组的基本方式有两种：

1. 使用Array构造函数。
2. 使用数组字面量表示法。

````js
// 第一种方法, 也可以省略`new`操作符。
var colors1 = new Array();
var colors2 = new Array(3);
var colors3 =  new Array("red");
var colors4 = new Array("red", "blue", "yellow");
// 第二种方法
var colors = ["red", "blue", "green"];
````

数组有一个`length`属性——它不只是只读的。（通过设置length可以从数组末尾移除项或向数组添加新项。如：`arr.length = new_item`

#### 检测数组

`Array.isArray(value)`：最终确定某个值是否是数组。

所有的函数参数都是**按值传递**的。即把值赋值给命名参数`arguments`的一个元素。

当参数为对象类型时，对象的引用通过按值传递后也能被处理函数引用到。

#### 转换方法

* toString()：返回数组元素以逗号分隔的字符串。
* valueOf()：返回结果与toString()相同。
* toLocaleString()：数组元素以逗号分隔的字符串，调用toLocaleString方法。
* join(separator)方法：自定义分隔符separator

若数组中某一项是undefined，则返回结果以空字符串表示。

#### 栈方法

数组有`push()`和`pop()`两种方法以实现类似栈的行为（LIFO）。

* `push()`：接收**任意数量**的参数，把它们逐个添加到数组末尾，并返回修改后数组的长度。
* `pop()`：从数组末尾移除最后一项，减少数组的length值，然后返回移除项。

#### 队列方法

数组有`shift()`和`unshift()`两种方法以实现类似队列的行为(FIFO)。

* `shift()`：移除数组中的第一项并返回该项。
* `unshift()`：在数组前端添加**任意个**项并返回新数组的长度。

#### 重排序方法

* `reverse()`：反转数组项的顺序。
* `sort()`：默认情况下，按**升序**排列数组项。`sort()`方法会调用每个数组项的`toString()`转型方法，然后**比较得到的字符串**进行排序。这在直接对数值型数据排序是会出错。

`sort()`接收一个比较函数作为参数，以便指定哪个值位于前面。若第一个参数应该位于第二个之前则返回一个负数，相等则返回0，否则返回正数。(升序时，返回正数才需要对换顺序)。

````js
function compare(value1, value2) {
	if(value1 < value2) {
		return -1;
	}else if(value1 > value2) {
		return 1;
	}else {
		return 0;
	}
}
// compare()函数可以简化为：
function compare2(value1, value2) {
	return value1- value2;
}
var values = [0,1,5,10,15];
values.sort(compare);
alert(values); // 0,1,5,10,15
````

#### 操作方法

* `concat()`方法：基于当前数组中所有项创建一个**新数组**。传入参数时，添加参数数组至结果数组末尾。
* `slice()`方法：接受1~2个参数，返回当前数组项的起始和结束位置之间项的新数组。（从0开始）
* `splice()`方法：多种用途，会改变当前数组。
	* 删除：指定2个参数，要删除的第一项的位置和要删除的项数。
	* 插入：提供3个参数：起始位置、0（要删除的项数）和要插入的项。
	* 替换：向指定位置插入任意数量的项，同时删除任意数量的项。指定3个参数：
	起始位置、要删除的项数和要插入的任意数量的项。
	
> `splice()`始终返回一个从原数组中删除的项，若没有删除任何项则返回一个空数组。

#### 位置方法

`indexOf()`和`lastIndexOf()`，都接受两个参数：要查找的项和表示查找起点的索引（可选）。

* `indexOf()`：从数组开头开始从前向后查找。
* `lastIndexOf()`：从数组末尾开始从后向前查找

两个方法的查找都使用**全等操作符**，都返回要查找的项在数组中的位置，没找到的情况下返回-1。

#### 迭代方法

为数组定义了5个迭代方法，每个方法都接收两个参数：要在每一项上运行的函数运行该桉树的作用域对象（可选）—— 影响`this`的值。传入这些方法中的函数接收3个参数：数组项的值、该项在数组中的位置和数组对象本身。
:sparkles:

